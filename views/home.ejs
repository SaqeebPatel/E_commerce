<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
  <form action="./home.ejs" method="post">
    <header class="container-fluid" style="background-color: azure;">
        <h1 style="font-family: fantasy; color: brown; margin-left: 35%; " class="title mt-3">
            Welcome to shopping cart
        </h1>
    </header>
    <nav class="navbar navbar-expand-lg navbar-light bg-light mt-3">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Navbar</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">

            </button>
            <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal">
                Cart<span id="productCount">0</span>
            </button>


        </div>

    </nav>



    <div class="container row mt-5" id="ContainerProducts" style="margin-left: 50px; gap: 20px;"></div>



    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="showCartProducts"></div>
                    Total price:<span id="totalPrice"></span>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Proceed to Buy</button>
                </div>
            </div>
        </div>
    </div>





  </form>
  <script>
     const product = [
    {
      id: 1,
      productname: "iphone 12",
      Des: "This is a smart phone",
      price: 15,
      imgsrc: "./pic/vivo.jpg",
    },
    {
      id: 2,
      productname: "iphone 13",
      Des: "This is a smart phone with extra feature",
      price: 20,
      imgsrc: "./pic/vivo.jpg",
    },
    {
      id: 3,
      productname: "iphone 14",
      Des: "This is a smart phone with good camera quality",
      price: 30,
      imgsrc: "./pic/vivo.jpg",
    },
  ];
  
  ContainerProducts = document.getElementById("ContainerProducts");
  
  product.forEach((element) => {
    newProduct = document.createElement("div");
    newProduct.className = "card";
    newProduct.style.width = "18rem";
    newProduct.innerHTML = `<div class="card-body">
                              <img class="card-title" src="${element.imgsrc}"height="130px">
                              <h5 class="card-title">${element.productname}</h5>
                              <p class="card-text">${element.Des}</p>
                              <p class="card-text">${element.price}</p>
                              <a href="#" class="btn btn-primary" type="button" onclick="addToCart(${element.id});"> Add To Cart</a>
                              </div>`;
    ContainerProducts.appendChild(newProduct);
  });
  
  cart = [];
  
  count = 0;
  
  function showCartProducts() {
    var totalPrice = 0;
    showproduct = document.getElementById("showCartProducts");
    showproduct.innerHTML = "";
    
    cart.forEach((elmn) => {
      cartProduct = document.createElement("div");
      cartProduct.innerHTML = `
                                  <h4>${elmn.productname}</h4>
                                  <p>${elmn.price}</p>`;
      showproduct.appendChild(cartProduct);
      console.log(showproduct);
      totalPrice += elmn.price;
      document.getElementById("totalPrice").innerHTML = totalPrice;
    });
  }
  function addToCart(id) {
    addedProduct = product.find((p) => p.id === id);
    console.log(addedProduct);
    
      cart.push(addedProduct);
      document.getElementById("productCount").innerHTML = cart.length;
    
    showCartProducts();
  }
  </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>